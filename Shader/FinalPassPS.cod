//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer SCENE_CONSTANT_BUFFER
// {
//
//   bool enableSSAO;                   // Offset:    0 Size:     4 [unused]
//   float time;                        // Offset:    4 Size:     4 [unused]
//   bool enableCascadedShadowMaps;     // Offset:    8 Size:     4 [unused]
//   bool enableSSR;                    // Offset:   12 Size:     4
//   bool enableFog;                    // Offset:   16 Size:     4
//   bool enableBloom;                  // Offset:   20 Size:     4
//   float elapsedTime;                 // Offset:   24 Size:     4 [unused]
//
// }
//
// cbuffer SHADER_CONSTANT_BUFFER
// {
//
//   float shadowColor;                 // Offset:    0 Size:     4
//   float shadowDepthBias;             // Offset:    4 Size:     4
//   bool colorizeCascadedLayer;        // Offset:    8 Size:     4
//
// }
//
// cbuffer CSM_CONSTANTS
// {
//
//   row_major float4x4 cascadedMatrices[4];// Offset:    0 Size:   256
//   float4 cascadedPlaneDistances;     // Offset:  256 Size:    16
//
// }
//
// cbuffer FOG_CONSTANTS_BUFFER
// {
//
//   float4 fogColor;                   // Offset:    0 Size:    16
//   float fogDensity;                  // Offset:   16 Size:     4 [unused]
//   float fogHeightFalloff;            // Offset:   20 Size:     4 [unused]
//   float groundLevel;                 // Offset:   24 Size:     4 [unused]
//   float fogCutoffDistance;           // Offset:   28 Size:     4 [unused]
//   float mieScatteringCoef;           // Offset:   32 Size:     4 [unused]
//   bool enableDither;                 // Offset:   36 Size:     4 [unused]
//   bool enableBlur;                   // Offset:   40 Size:     4
//   float timeScale;                   // Offset:   44 Size:     4 [unused]
//   float noiseScale;                  // Offset:   48 Size:     4 [unused]
//
// }
//
// cbuffer VIEW_CONSTANTS_BUFFER
// {
//
//   row_major float4x4 viewProjection; // Offset:    0 Size:    64 [unused]
//   float4 cameraPositon;              // Offset:   64 Size:    16 [unused]
//   row_major float4x4 view;           // Offset:   80 Size:    64 [unused]
//   row_major float4x4 projection;     // Offset:  144 Size:    64 [unused]
//   row_major float4x4 inverseProjection;// Offset:  208 Size:    64
//   row_major float4x4 inverseViewProjection;// Offset:  272 Size:    64
//   row_major float4x4 invView;        // Offset:  336 Size:    64 [unused]
//
// }
//
// cbuffer SSAO_CONSTANTS_BUFFER
// {
//
//   float sigma;                       // Offset:    0 Size:     4 [unused]
//   float power;                       // Offset:    4 Size:     4 [unused]
//   bool improvedNormalReconstructionFromDepth;// Offset:    8 Size:     4 [unused]
//   bool bilateralBlur;                // Offset:   12 Size:     4
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// pointSamplerState                 sampler      NA          NA             s0      1 
// linearBorderBlackSamplerState     sampler      NA          NA             s3      1 
// samplerStates[5]                  sampler      NA          NA             s5      1 
// comparisonSamplerState          sampler_c      NA          NA             s7      1 
// colorTexture                      texture  float4          2d             t0      1 
// depthTexture                      texture  float4          2d             t3      1 
// bloomTexture                      texture  float4          2d             t4      1 
// fogTexture                        texture  float4          2d             t5      1 
// ambientOcclusionTexture           texture  float4          2d             t6      1 
// reflectionTexture                 texture  float4          2d             t7      1 
// cascadedShadowMaps                texture  float4     2darray             t8      1 
// SCENE_CONSTANT_BUFFER             cbuffer      NA          NA            cb1      1 
// CSM_CONSTANTS                     cbuffer      NA          NA            cb3      1 
// VIEW_CONSTANTS_BUFFER             cbuffer      NA          NA            cb4      1 
// SSAO_CONSTANTS_BUFFER             cbuffer      NA          NA            cb5      1 
// FOG_CONSTANTS_BUFFER              cbuffer      NA          NA            cb8      1 
// SHADER_CONSTANT_BUFFER            cbuffer      NA          NA            cb9      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// TEXCOORD                 0   xy          1     NONE   float   xy  
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_immediateConstantBuffer { { 1.000000, 0, 0, 0},
                              { 0, 1.000000, 0, 0},
                              { 0, 0, 1.000000, 0},
                              { 0, 0, 0, 1.000000} }
dcl_constantbuffer CB1[2], immediateIndexed
dcl_constantbuffer CB9[1], immediateIndexed
dcl_constantbuffer CB3[17], dynamicIndexed
dcl_constantbuffer CB8[3], immediateIndexed
dcl_constantbuffer CB4[21], immediateIndexed
dcl_constantbuffer CB5[1], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s3, mode_default
dcl_sampler s5, mode_default
dcl_sampler s7, mode_comparison
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t3
dcl_resource_texture2d (float,float,float,float) t4
dcl_resource_texture2d (float,float,float,float) t5
dcl_resource_texture2d (float,float,float,float) t6
dcl_resource_texture2d (float,float,float,float) t7
dcl_resource_texture2darray (float,float,float,float) t8
dcl_input_ps linear v1.xy
dcl_output o0.xyzw
dcl_temps 7
dcl_indexableTemp x0[4], 4
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.texcoord.x; v1.y <- pin.texcoord.y; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w; 
//   x0 <- layerColors
//
#line 514 "C:\Users\2240225\Desktop\graphicEngine4\Shader\FinalPassPS.hlsl"
sample_indexable(texture2d)(float,float,float,float) r0.xyzw, v1.xyxx, t0.xyzw, s3  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z; r0.w <- color.w

#line 515
mov r0.w, r0.w  // r0.w <- alpha

#line 518
sample_indexable(texture2d)(float,float,float,float) r1.x, v1.xyxx, t3.xyzw, s3
mov r1.x, r1.x  // r1.x <- depthNdc

#line 522
itof r1.y, l(2)
mul r1.y, r1.y, v1.x
itof r1.z, l(1)
mov r1.z, -r1.z
add r1.y, r1.z, r1.y  // r1.y <- positionNdc.x

#line 523
itof r1.z, l(-2)
mul r1.z, r1.z, v1.y
itof r1.w, l(1)
add r1.z, r1.w, r1.z  // r1.z <- positionNdc.y

#line 524
mov r1.x, r1.x  // r1.x <- positionNdc.z

#line 525
itof r1.w, l(1)  // r1.w <- positionNdc.w

#line 528
mul r2.xy, r1.yyyy, cb4[13].zwzz
mul r1.yz, r1.zzzz, cb4[14].zzwz
add r1.yz, r1.yyzy, r2.xxyx
mul r2.xy, r1.xxxx, cb4[15].zwzz
add r1.xy, r1.yzyy, r2.xyxx
mul r1.zw, r1.wwww, cb4[16].zzzw
add r1.xy, r1.zwzz, r1.xyxx  // r1.x <- positionViewSpace.z; r1.y <- positionViewSpace.w

#line 529
div r1.x, r1.x, r1.y

#line 540
ine r1.y, l(0, 0, 0, 0), cb1[0].w
if_nz r1.y

#line 545
  sample_indexable(texture2d)(float,float,float,float) r1.yzw, v1.xyxx, t7.wxyz, s5
  add r0.xyz, r0.xyzx, r1.yzwy

#line 547
endif 

#line 548
mov r1.y, l(0)  // r1.y <- mip_level

#line 550
resinfo_indexable(texture2d)(float,float,float,float)_uint r1.yz, r1.y, t3.zxyw
mov r1.y, r1.y  // r1.y <- depthDimensions.x
mov r1.z, r1.z  // r1.z <- depthDimensions.y

#line 551
sample_indexable(texture2d)(float,float,float,float) r1.w, v1.xyxx, t3.yzwx, s5  // r1.w <- depth

#line 563
ine r2.x, l(0, 0, 0, 0), cb5[0].w
if_nz r2.x

#line 566
  mov r2.x, l(4.000000)  // r2.x <- radius

#line 567
  mov r2.y, l(32.000000)  // r2.y <- sigma

#line 568
  mov r2.z, l(0.010000)  // r2.z <- sigma2

#line 570
  mov r1.w, r1.w  // r1.w <- curr_depth

#line 571
  mov r2.w, l(0)  // r2.w <- weight

#line 574
  itof r3.x, l(0)  // r3.x <- accumulated_occlusion

#line 576
  mov r3.y, l(-4.000000)  // r3.y <- i
  mov r4.x, r2.w  // r4.x <- weight
  mov r4.y, r3.x  // r4.y <- accumulated_occlusion
  mov r3.z, r3.y  // r3.z <- i
  loop 
    ge r3.w, r2.x, r3.z
    breakc_z r3.w

#line 578
    mov r3.w, l(-4.000000)  // r3.w <- j
    mov r5.xy, r4.xyxx  // r5.x <- weight; r5.y <- accumulated_occlusion
    mov r5.z, r3.w  // r5.z <- j
    loop 
      ge r4.z, r2.x, r5.z
      breakc_z r4.z

#line 580
      utof r4.z, r1.y
      div r4.z, r3.z, r4.z  // r4.z <- dx

#line 581
      utof r4.w, r1.z
      div r4.w, r5.z, r4.w  // r4.w <- dy

#line 582
      add r6.x, r4.z, v1.x  // r6.x <- uv.x
      add r6.y, r4.w, v1.y  // r6.y <- uv.y

#line 584
      mul r4.z, r3.z, r3.z
      mul r4.w, r5.z, r5.z
      add r4.z, r4.w, r4.z  // r4.z <- distance

#line 585
      mov r4.z, -r4.z
      div r4.z, r4.z, r2.y
      mul r4.z, r4.z, l(1.442695)
      exp r4.z, r4.z  // r4.z <- domain_gaussian

#line 587
      itof r4.w, l(0)
      sample_l_indexable(texture2d)(float,float,float,float) r4.w, r6.xyxx, t3.yzwx, s5, r4.w
      mov r4.w, r4.w  // r4.w <- sample_depth

#line 588
      mov r5.w, -r4.w
      add r5.w, r1.w, r5.w
      mov r4.w, -r4.w
      add r4.w, r1.w, r4.w
      mul r4.w, r4.w, r5.w  // r4.w <- distance

#line 589
      mov r4.w, -r4.w
      div r4.w, r4.w, r2.z
      mul r4.w, r4.w, l(1.442695)
      exp r4.w, r4.w  // r4.w <- range_gaussian

#line 592
      itof r5.w, l(0)
      sample_l_indexable(texture2d)(float,float,float,float) r5.w, r6.xyxx, t6.yzwx, s5, r5.w
      mov r5.w, r5.w  // r5.w <- sample_occlusion

#line 593
      mul r5.w, r4.z, r5.w
      mul r5.w, r4.w, r5.w
      add r5.y, r5.w, r5.y

#line 595
      mul r4.z, r4.w, r4.z
      add r5.x, r4.z, r5.x

#line 596
      add r5.z, r5.z, l(1.000000)
    endloop 
    mov r4.x, r5.x  // r4.x <- weight
    mov r4.y, r5.y  // r4.y <- accumulated_occlusion

#line 597
    add r3.z, r3.z, l(1.000000)
  endloop 

#line 598
  div r1.y, r4.y, r4.x  // r1.y <- occlusion

#line 599
else   // Prior locations: r1.y <- depthDimensions.x

#line 602
  sample_indexable(texture2d)(float,float,float,float) r1.y, v1.xyxx, t6.yxzw, s5  // r1.y <- occlusion

#line 603
endif 

#line 604
mul r0.xyz, r0.xyzx, r1.yyyy

#line 608
nop 
mov r1.yz, v1.xxyx

#line 174
nop 
mov r1.yz, r1.yyzy

#line 157
sample_indexable(texture2d)(float,float,float,float) r2.z, v1.xyxx, t3.yzxw, s3
mov r2.z, r2.z  // r2.z <- depthNdc

#line 160
itof r1.w, l(2)
mul r1.y, r1.w, r1.y
itof r1.w, l(1)
mov r1.w, -r1.w
add r2.x, r1.w, r1.y  // r2.x <- positionNdc.x

#line 161
itof r1.y, l(-2)
mul r1.y, r1.y, r1.z
itof r1.z, l(1)
add r2.y, r1.z, r1.y  // r2.y <- positionNdc.y

#line 162
mov r2.z, r2.z  // r2.z <- positionNdc.z

#line 163
itof r2.w, l(1)  // r2.w <- positionNdc.w

#line 164
mov r2.x, r2.x  // r2.x <- <CalculatedPositionNDC return value>.x
mov r2.y, r2.y  // r2.y <- <CalculatedPositionNDC return value>.y
mov r2.z, r2.z  // r2.z <- <CalculatedPositionNDC return value>.z
mov r2.w, r2.w  // r2.w <- <CalculatedPositionNDC return value>.w

#line 174
mov r2.xyzw, r2.xyzw  // r2.x <- positionNdc.x; r2.y <- positionNdc.y; r2.z <- positionNdc.z; r2.w <- positionNdc.w

#line 176
mul r1.yz, r2.xxxx, cb4[13].zzwz
mul r3.xy, r2.yyyy, cb4[14].zwzz
add r1.yz, r1.yyzy, r3.xxyx
mul r3.xy, r2.zzzz, cb4[15].zwzz
add r1.yz, r1.yyzy, r3.xxyx
mul r3.xy, r2.wwww, cb4[16].zwzz
add r1.yz, r1.yyzy, r3.xxyx  // r1.y <- positionViewSpace.z; r1.z <- positionViewSpace.w

#line 177
div r1.y, r1.y, r1.z

#line 180
mul r3.xyzw, r2.xxxx, cb4[17].xyzw
mul r4.xyzw, r2.yyyy, cb4[18].xyzw
add r3.xyzw, r3.xyzw, r4.xyzw
mul r4.xyzw, r2.zzzz, cb4[19].xyzw
add r3.xyzw, r3.xyzw, r4.xyzw
mul r2.xyzw, r2.wwww, cb4[20].xyzw
add r2.xyzw, r2.xyzw, r3.xyzw  // r2.x <- positionWorldSpace.x; r2.y <- positionWorldSpace.y; r2.z <- positionWorldSpace.z; r2.w <- positionWorldSpace.w

#line 181
div r2.xyzw, r2.xyzw, r2.wwww

#line 185
mov r1.y, r1.y  // r1.y <- depthViewSpace

#line 186
mov r1.z, l(-1)  // r1.z <- cascadeIndex

#line 187
mov r1.w, l(0)  // r1.w <- layer
mov r3.x, r1.z  // r3.x <- cascadeIndex
mov r3.y, r1.w  // r3.y <- layer
loop 
  mov r3.z, l(4)
  ult r3.z, r3.y, r3.z
  breakc_z r3.z

#line 189
  dp4 r3.z, cb3[16].xyzw, icb[r3.y + 0].xyzw  // r3.z <- distance

#line 190
  lt r3.z, r1.y, r3.z
  if_nz r3.z

#line 192
    mov r3.x, r3.y

#line 193
    break 

#line 194
  endif 

#line 187
  iadd r3.y, r3.y, l(1)

#line 195
endloop 

#line 196
mov r1.y, l(1.000000)  // r1.y <- shadowFactor

#line 197
ilt r1.z, l(-1), r3.x
if_nz r1.z

#line 200
  imul null, r1.w, r3.x, l(4)
  mul r4.xyzw, r2.xxxx, cb3[r1.w + 0].xyzw
  mul r5.xyzw, r2.yyyy, cb3[r1.w + 1].xyzw
  add r4.xyzw, r4.xyzw, r5.xyzw
  mul r5.xyzw, r2.zzzz, cb3[r1.w + 2].xyzw
  add r4.xyzw, r4.xyzw, r5.xyzw
  mul r2.xyzw, r2.wwww, cb3[r1.w + 3].xyzw
  add r2.xyzw, r2.xyzw, r4.xyzw  // r2.x <- positionLightSpace.x; r2.y <- positionLightSpace.y; r2.z <- positionLightSpace.z; r2.w <- positionLightSpace.w

#line 201
  div r2.xyz, r2.xyzx, r2.wwww

#line 203
  mul r1.w, r2.x, l(0.500000)
  add r4.x, r1.w, l(0.500000)  // r4.x <- positionLightSpace.x

#line 204
  mul r1.w, r2.y, l(-0.500000)
  add r4.y, r1.w, l(0.500000)  // r4.y <- positionLightSpace.y

#line 206
  itof r4.z, r3.x
  mov r1.w, -cb9[0].y
  add r1.w, r1.w, r2.z
  sample_c_lz_indexable(texture2darray)(float,float,float,float) r1.y, r4.xyzx, t8.xxxx, s7, r1.w

#line 208
  mov r1.y, r1.y  // r1.y <- <CalculatedCascadedShadowFactor return value>

#line 227
  mov r1.w, r1.y  // r1.w <- <CalculatedCascadedShadowFactor return value>
  mov r1.y, r1.y
endif 

#line 228
if_z r1.z
  mov r1.w, r1.y
endif 

#line 608
mov r1.w, r1.w  // r1.w <- shadowFactor

#line 612
mov r1.x, r1.x  // r1.x <- depthViewSpace

#line 613
mov r1.y, l(-1)  // r1.y <- cascadeIndex

#line 614
mov r1.z, l(0)  // r1.z <- layer
mov r2.x, r1.y  // r2.x <- cascadeIndex
mov r2.y, r1.z  // r2.y <- layer
loop 
  mov r2.z, l(4)
  ult r2.z, r2.y, r2.z
  breakc_z r2.z

#line 616
  dp4 r2.z, cb3[16].xyzw, icb[r2.y + 0].xyzw  // r2.z <- distance

#line 617
  lt r2.z, r1.x, r2.z
  if_nz r2.z

#line 619
    mov r2.x, r2.y

#line 620
    break 

#line 621
  endif 

#line 614
  iadd r2.y, r2.y, l(1)

#line 622
endloop 

#line 623
ilt r1.x, l(-1), r2.x
if_nz r1.x

#line 625
  itof r1.xyz, l(1, 1, 1, 0)  // r1.x <- layerColor.x; r1.y <- layerColor.y; r1.z <- layerColor.z

#line 627
  ine r2.y, l(0, 0, 0, 0), cb9[0].z
  if_nz r2.y

#line 629
    itof r2.yzw, l(0, 1, 0, 0)
    itof r3.xyz, l(0, 1, 0, 0)
    itof r4.xyz, l(0, 0, 1, 0)
    itof r5.xyz, l(1, 1, 0, 0)
    mov x0[0].xyz, r2.yzwy
    mov x0[1].xyz, r3.xyzx
    mov x0[2].xyz, r4.xyzx
    mov x0[3].xyz, r5.xyzx

#line 636
    mov r1.xyz, x0[r2.x + 0].xyzx

#line 637
  endif 

#line 639
  mov r2.x, -cb9[0].x
  add r2.x, r2.x, l(1.000000)
  mul r1.w, r1.w, r2.x
  add r1.w, r1.w, cb9[0].x
  mul r1.xyz, r1.xyzx, r1.wwww
  mul r0.xyz, r0.xyzx, r1.xyzx

#line 640
endif 

#line 649
ine r1.x, l(0, 0, 0, 0), cb1[1].x
if_nz r1.x

#line 651
  nop 
  mov r1.xy, v1.xyxx

#line 462
  mov r1.z, l(0)  // r1.z <- depthMipLevel

#line 463
  resinfo_indexable(texture2d)(float,float,float,float)_uint r1.zw, r1.z, t3.zwxy  // r1.z <- depthMapDimensions.x; r1.w <- depthMapDimensions.y

#line 466
  ine r2.x, l(0, 0, 0, 0), cb8[2].z
  if_nz r2.x

#line 468
    sample_indexable(texture2d)(float,float,float,float) r2.x, v1.xyxx, t3.xyzw, s3  // r2.x <- depth

#line 470
    mov r2.y, l(0)  // r2.y <- accumulatedRadiance

#line 471
    mov r2.z, l(0)  // r2.z <- accumulatedWeight

#line 472
    mov r2.w, l(4.000000)  // r2.w <- radius

#line 473
    mov r3.x, l(-4.000000)  // r3.x <- x
    mov r4.x, r2.y  // r4.x <- accumulatedRadiance
    mov r4.y, r2.z  // r4.y <- accumulatedWeight
    mov r3.y, r3.x  // r3.y <- x
    loop 
      ge r3.z, r2.w, r3.y
      breakc_z r3.z

#line 475
      mov r3.z, l(-4.000000)  // r3.z <- y
      mov r5.xy, r4.xyxx  // r5.x <- accumulatedRadiance; r5.y <- accumulatedWeight
      mov r5.z, r3.z  // r5.z <- y
      loop 
        ge r3.w, r2.w, r5.z
        breakc_z r3.w

#line 477
        utof r3.w, r1.z
        utof r4.z, r1.w
        div r6.x, r3.y, r3.w  // r6.x <- offset.x
        div r6.y, r5.z, r4.z  // r6.y <- offset.y

#line 478
        add r4.zw, r1.xxxy, r6.xxxy  // r4.z <- texcoord.x; r4.w <- texcoord.y

#line 480
        sample_indexable(texture2d)(float,float,float,float) r3.w, r4.zwzz, t5.yzwx, s3
        mov r3.w, r3.w  // r3.w <- sampledRadiance

#line 482
        mul r5.w, r3.y, r3.y
        mul r6.x, r5.z, r5.z
        add r5.w, r5.w, r6.x  // r5.w <- distance

#line 483
        mov r6.x, l(32.000000)  // r6.x <- sigma

#line 484
        mov r5.w, -r5.w
        div r5.w, r5.w, r6.x
        mul r5.w, r5.w, l(1.442695)
        exp r5.w, r5.w  // r5.w <- domainGaussian

#line 486
        sample_indexable(texture2d)(float,float,float,float) r4.z, r4.zwzz, t3.yzxw, s3
        mov r4.z, r4.z  // r4.z <- sampledDepth

#line 487
        mov r4.w, -r4.z
        add r4.w, r2.x, r4.w
        mov r4.z, -r4.z
        add r4.z, r2.x, r4.z
        mul r4.z, r4.z, r4.w  // r4.z <- distance

#line 488
        mov r4.w, l(0.000100)  // r4.w <- sigma2

#line 489
        mov r4.z, -r4.z
        div r4.z, r4.z, r4.w
        mul r4.z, r4.z, l(1.442695)
        exp r4.z, r4.z  // r4.z <- rangeGaussian

#line 491
        mul r3.w, r3.w, r5.w
        mul r3.w, r4.z, r3.w
        add r5.x, r3.w, r5.x

#line 492
        mul r3.w, r4.z, r5.w
        add r5.y, r3.w, r5.y

#line 493
        add r5.z, r5.z, l(1.000000)
      endloop 
      mov r4.x, r5.x  // r4.x <- accumulatedRadiance
      mov r4.y, r5.y  // r4.y <- accumulatedWeight

#line 494
      add r3.y, r3.y, l(1.000000)
    endloop 

#line 495
    max r1.x, r4.y, l(0.000010)
    div r1.x, r4.x, r1.x  // r1.x <- fogFacter

#line 496
  else   // Prior locations: r1.x <- pin.texcoord.x

#line 499
    sample_indexable(texture2d)(float,float,float,float) r1.x, v1.xyxx, t5.xyzw, s3  // r1.x <- fogFacter

#line 500
  endif 

#line 502
  mul r1.yzw, cb8[0].wwww, cb8[0].xxyz
  itof r2.x, l(0)
  max r1.x, r1.x, r2.x
  mul r1.xyz, r1.xxxx, r1.yzwy  // r1.x <- fogColor_.x; r1.y <- fogColor_.y; r1.z <- fogColor_.z

#line 503
  mov r1.xyz, r1.xyzx  // r1.x <- <CalculatedFogColor return value>.x; r1.y <- <CalculatedFogColor return value>.y; r1.z <- <CalculatedFogColor return value>.z

#line 651
  add r0.xyz, r0.xyzx, r1.xyzx

#line 652
endif 

#line 659
ine r1.x, l(0, 0, 0, 0), cb1[1].y
if_nz r1.x

#line 661
  sample_indexable(texture2d)(float,float,float,float) r1.xyz, v1.xyxx, t4.xyzw, s0  // r1.x <- bloom.x; r1.y <- bloom.y; r1.z <- bloom.z

#line 662
  add r0.xyz, r0.xyzx, r1.xyzx

#line 663
endif 

#line 670
nop 
mov r0.xyz, r0.xyzx

#line 49
dp3 r1.x, r0.xyzx, l(0.212600, 0.715200, 0.072200, 0.000000)  // r1.x <- l

#line 50
add r1.yzw, r0.xxyz, l(0.000000, 1.000000, 1.000000, 1.000000)
div r1.yzw, r0.xxyz, r1.yyzw  // r1.y <- tc.x; r1.z <- tc.y; r1.w <- tc.z

#line 52
add r1.x, r1.x, l(1.000000)
div r0.xyz, r0.xyzx, r1.xxxx
mov r2.xyz, -r0.xyzx
add r2.xyz, r1.yzwy, r2.xyzx
mul r1.xyz, r1.yzwy, r2.xyzx
add r0.xyz, r0.xyzx, r1.xyzx  // r0.x <- <JodieReinhardTonemap return value>.x; r0.y <- <JodieReinhardTonemap return value>.y; r0.z <- <JodieReinhardTonemap return value>.z

#line 670
mov r0.xyz, r0.xyzx  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z

#line 715
log r0.xyz, r0.xyzx
mul r0.xyz, r0.xyzx, l(0.454545, 0.454545, 0.454545, 0.000000)
exp r0.xyz, r0.xyzx  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z

#line 716
mov o0.xyz, r0.xyzx
mov o0.w, r0.w
ret 
// Approximately 318 instruction slots used
